(this.webpackJsonptypinggamev2=this.webpackJsonptypinggamev2||[]).push([[0],{30:function(e,t,a){e.exports=a(49)},36:function(e,t,a){},37:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(25),o=a.n(l),r=(a(35),a(17)),s=a(7),i=a(2),u=Object(n.createContext)(),m=(a(36),function(){var e=Object(n.useContext)(u),t=e.username,a=(e.getAuthState,e.setAuthState),l=Object(n.useState)(null),o=Object(i.a)(l,2),r=o[0],s=o[1];console.log(t);return c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"header"},"TYPING GAME"),c.a.createElement("div",{className:"banner"},c.a.createElement("div",{className:"container container-form d-flex justify-content-center"},c.a.createElement("div",{className:"row align-self-center row-form "},c.a.createElement("div",{className:" col-xs-12 col-sm-12 col-md-6  "},c.a.createElement("h1",{className:"display-4"},"Write your username")),c.a.createElement("div",{className:" col-xs-12 col-sm-12 col-md-4 ",style:{paddingTop:"20px"}},c.a.createElement("form",null,c.a.createElement("span",{className:"input-group"},c.a.createElement("input",{onChange:function(e){s(e.target.value)},type:"text",className:"form-control",placeholder:"Username","aria-label":"Recipient's username","aria-describedby":"basic-addon2",required:!0}),c.a.createElement("span",{className:"input-group-append"},c.a.createElement("button",{type:"submit",className:"btn btn-info",onClick:function(e){e.preventDefault(),a(r)}},"Play")))))))))}),b=(a(37),Object(n.createContext)()),d=function(){Object(n.useContext)(u).username;var e=Object(n.useContext)(b),t=e.showCreateLobby,a=(e.showJoinLobby,e.showMainMenu,e.showSearchLobby),l=Object(n.useState)(!1),o=Object(i.a)(l,2);o[0],o[1];return c.a.createElement("div",{className:"container  d-flex justify-content-center "},c.a.createElement("div",{className:"button-container align-self-center"},c.a.createElement("div",{className:"row  "},c.a.createElement("div",{className:"col-12"},c.a.createElement("button",{type:"button",className:"btn btn-outline-light"},"Join Lobby"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("button",{type:"button",className:"btn btn-outline-light",onClick:function(){a(!0)}},"Search for a lobby"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("button",{type:"button",className:"btn btn-outline-light",onClick:function(){t(!0)}},"Create lobby")))))},p=a(9),y=a(26),f=a(13),h=a.n(f),v=(a(38),a(40),{apiKey:"AIzaSyAO7Opd3kKUYrHS32RfwXVJTcsv7BAzoxg",authDomain:"typinggamev2.firebaseapp.com",databaseURL:"https://typinggamev2.firebaseio.com/",storageBucket:"typinggamev2"}),E=new function e(){Object(y.a)(this,e),h.a.initializeApp(v),this.auth=h.a.auth(),this.db=h.a.database()},g=Object(s.f)((function(e){var t,a=Object(n.useState)("publica"),l=Object(i.a)(a,2),o=l[0],r=l[1],s=Object(n.useState)(""),u=Object(i.a)(s,2),m=u[0],b=u[1],d=Object(n.useState)(""),y=Object(i.a)(d,2),f=y[0],h=y[1],v=function(){""===m||""===f&&"privada"===o||(console.log("empiza la creacion"),E.db.ref("lobbies").push({nombre:m,tipo:o,password:f}).then((function(t){console.log(t.key),e.history.push("/game/".concat(t.key))})).catch((function(e){console.log(e)})))};return c.a.createElement("div",{className:"container  d-flex justify-content-center "},c.a.createElement("div",{className:"button-container align-self-center"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("div",{className:"input-group input-group-sm mb-3"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-sm"},"Lobby name")),c.a.createElement("input",(t={className:"text"},Object(p.a)(t,"className","form-control"),Object(p.a)(t,"aria-label","Small"),Object(p.a)(t,"aria-describedby","inputGroup-sizing-sm"),Object(p.a)(t,"onChange",(function(e){b(e.target.value)})),t))))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-6"},c.a.createElement("div",{className:"btn-group btn-group-toggle",style:{width:"inherit"},"data-toggle":"buttons"},c.a.createElement("label",{className:"btn btn-secondary active",id:"publica"},c.a.createElement("input",{type:"radio",name:"options",id:"option1",autoComplete:"off",checked:"publica"===o,onChange:function(){r("publica"),document.getElementById("publica").classList.add("active"),document.getElementById("privada").classList.remove("active")}}),"Publica"),c.a.createElement("label",{className:"btn btn-secondary",id:"privada"},c.a.createElement("input",{checked:"privada"===o,type:"radio",className:"options",id:"option2",autoComplete:"off",onChange:function(){console.log("test"),r("privada"),document.getElementById("publica").classList.remove("active"),document.getElementById("privada").classList.add("active")}}),"Privada"))),"privada"===o?c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"col-6"},c.a.createElement("input",{type:"password",className:"form-control",id:"inputPassword4",placeholder:"Password",onChange:function(e){h(e.target.value)},value:f})),c.a.createElement("div",{className:"col-12",style:{marginTop:"15px"}},c.a.createElement("button",{className:"btn btn-info",onClick:v},"PLAY!"))):c.a.createElement("div",{className:"col-6"},c.a.createElement("button",{className:"btn btn-info",onClick:v},"PLAY!")))))})),O=function(){var e=Object(n.useContext)(u).username,t=Object(n.useContext)(b),a=t.mainMenu,l=t.createLobby,o=(t.searchLobby,t.joinLobby,null);return!0===l?o=c.a.createElement(g,null):!0===a&&(o=c.a.createElement(d,null)),c.a.createElement("div",{className:"main d-flex justify-content-center"},c.a.createElement("div",{className:"headerMenu"},"TYPING GAME"),c.a.createElement("div",{className:"align-self-center menu rounded"},c.a.createElement("div",{className:"menu-top-corner rounded justify-content-center",style:{color:"white"}},"Are you ready to type ",e," ?"),o))},j=function(){return c.a.createElement("div",{className:"main d-flex justify-content-center "},c.a.createElement("div",{className:"spinner-border text-danger align-self-center",style:{height:"10vw",width:"10vw"},role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")))},N=a(20),S=a.n(N),L=a(29),w=(a(48),function(e){var t=Object(n.useContext)(u).username,a=e.match.params[0],l=Object(n.useState)(!0),o=Object(i.a)(l,2),r=o[0],s=o[1],m=Object(n.useState)(null),b=Object(i.a)(m,2),d=b[0],p=b[1],y=Object(n.useState)(null),f=Object(i.a)(y,2),h=f[0],v=f[1],g=Object(n.useState)(null),O=Object(i.a)(g,2),N=O[0],w=O[1],x=Object(n.useState)(""),A=Object(i.a)(x,2),C=A[0],P=A[1],T=Object(n.useState)(""),k=Object(i.a)(T,2),B=k[0],M=k[1],_=Object(n.useState)(null),H=Object(i.a)(_,2),I=H[0],Y=H[1],W=Object(n.useState)(""),R=Object(i.a)(W,2),U=R[0],G=R[1],J=Object(n.useState)(null),D=Object(i.a)(J,2),z=D[0],q=D[1],F=Object(n.useState)(""),K=Object(i.a)(F,2),V=K[0],X=K[1],$=Object(n.useState)(""),Q=Object(i.a)($,2),Z=Q[0],ee=Q[1],te=Object(n.useState)(""),ae=Object(i.a)(te,2),ne=ae[0],ce=ae[1],le=Object(n.useState)(""),oe=Object(i.a)(le,2),re=oe[0],se=oe[1];Object(n.useEffect)((function(){if(null!==t)E.db.ref("lobbies").child(a).once("value",(function(e){var a=e.val();void 0==a.player1?e.ref.update({player1:t}).then((function(){w(1),e.ref.onDisconnect().update({player1:null})})):void 0==a.player2&&e.ref.update({player2:t}).then((function(){w(2),e.ref.onDisconnect().update({player2:null})})),e.ref.on("value",(function(e){var t=e.val();p(void 0!=t.player1?t.player1:"waiting for player"),v(void 0!=t.player2?t.player2:"waiting for player"),Y(t.quote),void 0!==t.textPlayer1&&X(t.textPlayer1),void 0!==t.textPlayer2&&ee(t.textPlayer2),null===z&&q(t.quote),s(!1)})),1==N?e.ref.onDisconnect().update({textPlayer1:""}).then((function(){null!=z&&Y(z.replace(B)),P(""),X(null)})):e.ref.onDisconnect().update({textPlayer2:""}).then((function(){null!=z&&Y(z.replace(C)),M(""),ee(null)}))}))}),[t]),Object(n.useEffect)((function(){if(null!=V&&null!=Z&&null!=z){var e=ie(V),t=ie(Z);if(e.length>t.length){var a=z.replace(e,""),n=e.replace(t,""),c=t,l=t;Y(a),P(n),M(c),G(l),ce(e),se(t),console.log("PLAYER 1"),console.log("textP1: ",n),console.log("textP2: ",c),console.log("both: ",l),console.log("missing quote: ",a)}else{a=z.replace(t,""),n=e,c=t.replace(e,""),l=e;Y(a),P(n),M(c),G(l),ce(e),se(t),console.log("PLAYER 2"),console.log("textP1: ",n),console.log("textP2: ",c),console.log("both: ",l),console.log("missing quote: ",a)}}else if(null!=z)if(null!=V){console.log("test12312");e=ie(V);P(e)}else{t=ie(Z);M(t)}}),[V,Z]);var ie=function(e){if(null!=z){for(var t="",a=0;a<z.length&&e.charAt(a)===z.charAt(a);a++)t+=e.charAt(a);return t}return""};return r?c.a.createElement(j,null):c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"container container-playground"},c.a.createElement("div",{className:"paragraph",onCopy:function(e){e.preventDefault(),console.log("cheater")}},c.a.createElement(n.Fragment,null,c.a.createElement("span",{id:"both"},U),c.a.createElement("span",{id:ne.length>=re.length?"player1":"player2"},ne.length>re.length?(console.log(C),C):re.length>ne.length?(console.log(B),B):null),c.a.createElement("span",{id:"general"},I))),c.a.createElement("div",{className:"match-label"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-5"},d),c.a.createElement("div",{className:"col-md-2"},c.a.createElement("b",null,"VS")),c.a.createElement("div",{className:"col-md-5"},h))),c.a.createElement("div",{className:"textarea"},c.a.createElement("textarea",{rows:12,placeholder:"Write here",className:"textarea-input",onChange:function(){var e=Object(L.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1==N?E.db.ref("lobbies").child(a).update({textPlayer1:t.target.value}):2==N&&E.db.ref("lobbies").child(a).update({textPlayer2:t.target.value});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))))}),x=a(8),A=function(e,t){switch(t.type){case"SHOW_CREATE_LOBBY":return Object(x.a)({},e,{createLobby:t.payload,mainMenu:!t.payload,joinLobby:!t.payload,searchLobby:!t.payload});case"SHOW_SEARCH_LOBBY":return Object(x.a)({},e,{createLobby:!t.payload,mainMenu:!t.payload,joinLobby:!t.payload,searchLobby:t.payload});case"SHOW_JOIN_LOBBY":return Object(x.a)({},e,{createLobby:!t.payload,mainMenu:!t.payload,joinLobby:t.payload,searchLobby:!t.payload});case"SHOW_MAIN_MENU":return Object(x.a)({},e,{createLobby:!t.payload,mainMenu:t.payload,joinLobby:!t.payload,searchLobby:!t.payload});default:return e}},C=function(e){var t=Object(n.useReducer)(A,{mainMenu:!0,createLobby:!1,searchLobby:!1,joinLobby:!1}),a=Object(i.a)(t,2),l=a[0],o=a[1];return c.a.createElement(b.Provider,{value:{mainMenu:l.mainMenu,createLobby:l.createLobby,searchLobby:l.searchLobby,joinLobby:l.joinLobby,showCreateLobby:function(e){o({type:"SHOW_CREATE_LOBBY",payload:e})},showJoinLobby:function(e){o({type:"SHOW_JOIN_LOBBY",payload:e})},showMainMenu:function(e){o({type:"SHOW_MAIN_MENU",payload:e})},showSearchLobby:function(e){o({type:"SHOW_SEARCH_LOBBY",payload:e})}}},e.children)};var P=function(){var e=Object(n.useContext)(u),t=e.username,a=(e.getAuthState,null);return a=!1===e.checked?j:null!==t?O:m,c.a.createElement(C,null,c.a.createElement(r.a,null,c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/",component:a}),c.a.createElement(s.a,{exact:!0,path:"/game/*",component:w}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=function(e,t){switch(t.type){case"SET_AUTHSTATE":return localStorage.setItem("auth",t.payload),Object(x.a)({},e,{username:t.payload});case"GET_AUTHSTATE":return Object(x.a)({},e,{username:t.payload,checked:!0});default:return e}},k=function(e){var t=Object(n.useReducer)(T,{username:null,checked:!1}),a=Object(i.a)(t,2),l=a[0],o=a[1];Object(n.useEffect)((function(){r(),console.log("se llama getAuhState")}),[]);var r=function(){var e=localStorage.getItem("auth");o({type:"GET_AUTHSTATE",payload:e})};return c.a.createElement(u.Provider,{value:{username:l.username,getAuthState:r,setAuthState:function(e){o({type:"SET_AUTHSTATE",payload:e})},checked:l.checked}},e.children)};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null,c.a.createElement(P,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.689af5a6.chunk.js.map