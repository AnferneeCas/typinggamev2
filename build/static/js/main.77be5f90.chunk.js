(this.webpackJsonptypinggamev2=this.webpackJsonptypinggamev2||[]).push([[0],{30:function(e,a,t){e.exports=t(49)},36:function(e,a,t){},37:function(e,a,t){},48:function(e,a,t){},49:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(25),r=t.n(l),o=(t(35),t(17)),s=t(7),i=t(2),u=Object(n.createContext)(),m=(t(36),function(){var e=Object(n.useContext)(u),a=e.username,t=(e.getAuthState,e.setAuthState),l=Object(n.useState)(null),r=Object(i.a)(l,2),o=r[0],s=r[1];console.log(a);return c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"header"},"TYPING GAME"),c.a.createElement("div",{className:"banner"},c.a.createElement("div",{className:"container container-form d-flex justify-content-center"},c.a.createElement("div",{className:"row align-self-center row-form "},c.a.createElement("div",{className:" col-xs-12 col-sm-12 col-md-6  "},c.a.createElement("h1",{className:"display-4"},"Write your username")),c.a.createElement("div",{className:" col-xs-12 col-sm-12 col-md-4 ",style:{paddingTop:"20px"}},c.a.createElement("form",null,c.a.createElement("span",{className:"input-group"},c.a.createElement("input",{onChange:function(e){s(e.target.value)},type:"text",className:"form-control",placeholder:"Username","aria-label":"Recipient's username","aria-describedby":"basic-addon2",required:!0}),c.a.createElement("span",{className:"input-group-append"},c.a.createElement("button",{type:"submit",className:"btn btn-info",onClick:function(e){e.preventDefault(),t(o)}},"Play")))))))))}),b=(t(37),Object(n.createContext)()),d=function(){Object(n.useContext)(u).username;var e=Object(n.useContext)(b),a=e.showCreateLobby,t=(e.showJoinLobby,e.showMainMenu,e.showSearchLobby),l=Object(n.useState)(!1),r=Object(i.a)(l,2);r[0],r[1];return c.a.createElement("div",{className:"container  d-flex justify-content-center "},c.a.createElement("div",{className:"button-container align-self-center"},c.a.createElement("div",{className:"row  "},c.a.createElement("div",{className:"col-12"},c.a.createElement("button",{type:"button",className:"btn btn-outline-light"},"Join Lobby"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("button",{type:"button",className:"btn btn-outline-light",onClick:function(){t(!0)}},"Search for a lobby"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("button",{type:"button",className:"btn btn-outline-light",onClick:function(){a(!0)}},"Create lobby")))))},p=t(9),y=t(26),h=t(13),f=t.n(h),v=(t(38),t(40),{apiKey:"AIzaSyAO7Opd3kKUYrHS32RfwXVJTcsv7BAzoxg",authDomain:"typinggamev2.firebaseapp.com",databaseURL:"https://typinggamev2.firebaseio.com/",storageBucket:"typinggamev2"}),E=new function e(){Object(y.a)(this,e),f.a.initializeApp(v),this.auth=f.a.auth(),this.db=f.a.database()},g=Object(s.f)((function(e){var a,t=Object(n.useState)("publica"),l=Object(i.a)(t,2),r=l[0],o=l[1],s=Object(n.useState)(""),u=Object(i.a)(s,2),m=u[0],b=u[1],d=Object(n.useState)(""),y=Object(i.a)(d,2),h=y[0],f=y[1],v=function(){""===m||""===h&&"privada"===r||(console.log("empiza la creacion"),E.db.ref("lobbies").push({nombre:m,tipo:r,password:h}).then((function(a){console.log(a.key),e.history.push("/game/".concat(a.key))})).catch((function(e){console.log(e)})))};return c.a.createElement("div",{className:"container  d-flex justify-content-center "},c.a.createElement("div",{className:"button-container align-self-center"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("div",{className:"input-group input-group-sm mb-3"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-sm"},"Lobby name")),c.a.createElement("input",(a={className:"text"},Object(p.a)(a,"className","form-control"),Object(p.a)(a,"aria-label","Small"),Object(p.a)(a,"aria-describedby","inputGroup-sizing-sm"),Object(p.a)(a,"onChange",(function(e){b(e.target.value)})),a))))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-6"},c.a.createElement("div",{className:"btn-group btn-group-toggle",style:{width:"inherit"},"data-toggle":"buttons"},c.a.createElement("label",{className:"btn btn-secondary active",id:"publica"},c.a.createElement("input",{type:"radio",name:"options",id:"option1",autoComplete:"off",checked:"publica"===r,onChange:function(){o("publica"),document.getElementById("publica").classList.add("active"),document.getElementById("privada").classList.remove("active")}}),"Publica"),c.a.createElement("label",{className:"btn btn-secondary",id:"privada"},c.a.createElement("input",{checked:"privada"===r,type:"radio",className:"options",id:"option2",autoComplete:"off",onChange:function(){console.log("test"),o("privada"),document.getElementById("publica").classList.remove("active"),document.getElementById("privada").classList.add("active")}}),"Privada"))),"privada"===r?c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"col-6"},c.a.createElement("input",{type:"password",className:"form-control",id:"inputPassword4",placeholder:"Password",onChange:function(e){f(e.target.value)},value:h})),c.a.createElement("div",{className:"col-12",style:{marginTop:"15px"}},c.a.createElement("button",{className:"btn btn-info",onClick:v},"PLAY!"))):c.a.createElement("div",{className:"col-6"},c.a.createElement("button",{className:"btn btn-info",onClick:v},"PLAY!")))))})),O=function(){var e=Object(n.useContext)(u).username,a=Object(n.useContext)(b),t=a.mainMenu,l=a.createLobby,r=(a.searchLobby,a.joinLobby,null);return!0===l?r=c.a.createElement(g,null):!0===t&&(r=c.a.createElement(d,null)),c.a.createElement("div",{className:"main d-flex justify-content-center"},c.a.createElement("div",{className:"headerMenu"},"TYPING GAME"),c.a.createElement("div",{className:"align-self-center menu rounded"},c.a.createElement("div",{className:"menu-top-corner rounded justify-content-center",style:{color:"white"}},"Are you ready to type ",e," ?"),r))},j=function(){return c.a.createElement("div",{className:"main d-flex justify-content-center "},c.a.createElement("div",{className:"spinner-border text-danger align-self-center",style:{height:"10vw",width:"10vw"},role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")))},N=t(20),A=t.n(N),S=t(29),L=(t(48),function(e){var a=Object(n.useContext)(u).username,t=e.match.params[0],l=Object(n.useState)(!0),r=Object(i.a)(l,2),o=r[0],s=r[1],m=Object(n.useState)(null),b=Object(i.a)(m,2),d=b[0],p=b[1],y=Object(n.useState)(null),h=Object(i.a)(y,2),f=h[0],v=h[1],g=Object(n.useState)(null),O=Object(i.a)(g,2),N=O[0],L=O[1],w=Object(n.useState)(""),x=Object(i.a)(w,2),C=x[0],k=x[1],T=Object(n.useState)(""),B=Object(i.a)(T,2),M=B[0],_=B[1],P=Object(n.useState)(null),H=Object(i.a)(P,2),I=H[0],W=H[1],Y=Object(n.useState)(""),R=Object(i.a)(Y,2),U=R[0],G=R[1],J=Object(n.useState)(null),D=Object(i.a)(J,2),z=D[0],q=D[1],F=Object(n.useState)(null),K=Object(i.a)(F,2),V=K[0],X=K[1],$=Object(n.useState)(null),Q=Object(i.a)($,2),Z=Q[0],ee=Q[1];return Object(n.useEffect)((function(){if(null!==a)E.db.ref("lobbies").child(t).once("value",(function(e){var t=e.val();void 0==t.player1?e.ref.update({player1:a}).then((function(){L(1),e.ref.onDisconnect().update({player1:null})})):void 0==t.player2&&e.ref.update({player2:a}).then((function(){L(2),e.ref.onDisconnect().update({player2:null})})),e.ref.on("value",(function(e){var a=e.val();p(void 0!=a.player1?a.player1:"waiting for player"),v(void 0!=a.player2?a.player2:"waiting for player"),W(a.quote),void 0!==a.textPlayer1&&X(a.textPlayer1),void 0!==a.textPlayer2&&ee(a.textPlayer2),null===z&&q(a.quote),s(!1)})),1==N?e.ref.onDisconnect().update({textPlayer1:""}).then((function(){null!=z&&W(z.replace(M)),console.log("disconnect: "+z),k(""),X(null)})):e.ref.onDisconnect().update({textPlayer2:""}).then((function(){null!=z&&W(z.replace(C)),console.log("disconnect: "+z),_(""),ee(null)}))}))}),[a]),Object(n.useEffect)((function(){if(null!=V&&null!=Z&&null!=z)if(console.log(z),V.length>=Z.length){for(var e="",a="",t=0;t<=V.length;t++)if(console.log(V.charAt(t)),console.log(Z.charAt(t)),console.log(z.charAt(t)),V.charAt(t)==Z.charAt(t)&&V.charAt(t)==z.charAt(t))a+=z.charAt(t),e+=V.charAt(t);else{if(V.charAt(t)!=z.charAt(t))break;a+=z.charAt(t)}var n=a.replace(e,"");k(n),G(e);var c=e+n;W(z.replace(c,"")),console.log("both1")}else{a="",e="";for(var l=0;l<Z.length;l++)if(Z.charAt(l)==V.charAt(l)&&Z.charAt(l)==z.charAt(l))a+=z.charAt(l),e+=Z.charAt(l);else{if(Z.charAt(l)!=z.charAt(l))break;a+=z.charAt(l)}n=a.replace(e,"");_(n),G(e);c=e+n;W(z.replace(c,""))}else if(null!=z){if(null!=V){a="";for(var r=0;r<z.length&&V.charAt(r)===z.charAt(r);r++)a+=V.charAt(r);k(a),W(z.replace(a,""))}if(null!=Z){a="";for(var o=0;o<z.length&&Z.charAt(o)===z.charAt(o);o++)a+=Z.charAt(o);_(a),W(z.replace(a,""))}}}),[V,Z]),o?c.a.createElement(j,null):c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"container container-playground"},c.a.createElement("div",{className:"paragraph",onCopy:function(e){e.preventDefault(),console.log("cheater")}},c.a.createElement(n.Fragment,null,c.a.createElement("span",{id:"both"},U),c.a.createElement("span",{id:C.length>=M?"player1":"player2"},C.length>=M.length?C:M),c.a.createElement("span",{id:"general"},I))),c.a.createElement("div",{className:"match-label"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-5"},d),c.a.createElement("div",{className:"col-md-2"},c.a.createElement("b",null,"VS")),c.a.createElement("div",{className:"col-md-5"},f))),c.a.createElement("div",{className:"textarea"},c.a.createElement("textarea",{rows:12,placeholder:"Write here",className:"textarea-input",onChange:function(){var e=Object(S.a)(A.a.mark((function e(a){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1==N?E.db.ref("lobbies").child(t).update({textPlayer1:a.target.value}):2==N&&E.db.ref("lobbies").child(t).update({textPlayer2:a.target.value});case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}))))}),w=t(8),x=function(e,a){switch(a.type){case"SHOW_CREATE_LOBBY":return Object(w.a)({},e,{createLobby:a.payload,mainMenu:!a.payload,joinLobby:!a.payload,searchLobby:!a.payload});case"SHOW_SEARCH_LOBBY":return Object(w.a)({},e,{createLobby:!a.payload,mainMenu:!a.payload,joinLobby:!a.payload,searchLobby:a.payload});case"SHOW_JOIN_LOBBY":return Object(w.a)({},e,{createLobby:!a.payload,mainMenu:!a.payload,joinLobby:a.payload,searchLobby:!a.payload});case"SHOW_MAIN_MENU":return Object(w.a)({},e,{createLobby:!a.payload,mainMenu:a.payload,joinLobby:!a.payload,searchLobby:!a.payload});default:return e}},C=function(e){var a=Object(n.useReducer)(x,{mainMenu:!0,createLobby:!1,searchLobby:!1,joinLobby:!1}),t=Object(i.a)(a,2),l=t[0],r=t[1];return c.a.createElement(b.Provider,{value:{mainMenu:l.mainMenu,createLobby:l.createLobby,searchLobby:l.searchLobby,joinLobby:l.joinLobby,showCreateLobby:function(e){r({type:"SHOW_CREATE_LOBBY",payload:e})},showJoinLobby:function(e){r({type:"SHOW_JOIN_LOBBY",payload:e})},showMainMenu:function(e){r({type:"SHOW_MAIN_MENU",payload:e})},showSearchLobby:function(e){r({type:"SHOW_SEARCH_LOBBY",payload:e})}}},e.children)};var k=function(){var e=Object(n.useContext)(u),a=e.username,t=(e.getAuthState,null);return t=!1===e.checked?j:null!==a?O:m,c.a.createElement(C,null,c.a.createElement(o.a,null,c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/",component:t}),c.a.createElement(s.a,{exact:!0,path:"/game/*",component:L}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=function(e,a){switch(a.type){case"SET_AUTHSTATE":return localStorage.setItem("auth",a.payload),Object(w.a)({},e,{username:a.payload});case"GET_AUTHSTATE":return Object(w.a)({},e,{username:a.payload,checked:!0});default:return e}},B=function(e){var a=Object(n.useReducer)(T,{username:null,checked:!1}),t=Object(i.a)(a,2),l=t[0],r=t[1];Object(n.useEffect)((function(){o(),console.log("se llama getAuhState")}),[]);var o=function(){var e=localStorage.getItem("auth");r({type:"GET_AUTHSTATE",payload:e})};return c.a.createElement(u.Provider,{value:{username:l.username,getAuthState:o,setAuthState:function(e){r({type:"SET_AUTHSTATE",payload:e})},checked:l.checked}},e.children)};r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(B,null,c.a.createElement(k,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.77be5f90.chunk.js.map