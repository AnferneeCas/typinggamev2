(this.webpackJsonptypinggamev2=this.webpackJsonptypinggamev2||[]).push([[0],{30:function(e,t,a){e.exports=a(49)},36:function(e,t,a){},37:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(26),o=a.n(l),r=(a(35),a(12)),s=a(7),i=a(2),u=Object(n.createContext)(),m=(a(36),function(){var e=Object(n.useContext)(u),t=e.username,a=(e.getAuthState,e.setAuthState),l=Object(n.useState)(null),o=Object(i.a)(l,2),r=o[0],s=o[1];console.log(t);return c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"header"},"TYPING GAME"),c.a.createElement("div",{className:"banner"},c.a.createElement("div",{className:"container container-form d-flex justify-content-center"},c.a.createElement("div",{className:"row align-self-center row-form "},c.a.createElement("div",{className:" col-xs-12 col-sm-12 col-md-6  "},c.a.createElement("h1",{className:"display-4"},"Write your username")),c.a.createElement("div",{className:" col-xs-12 col-sm-12 col-md-4 ",style:{paddingTop:"20px"}},c.a.createElement("form",null,c.a.createElement("span",{className:"input-group"},c.a.createElement("input",{onChange:function(e){s(e.target.value)},type:"text",className:"form-control",placeholder:"Username","aria-label":"Recipient's username","aria-describedby":"basic-addon2",required:!0}),c.a.createElement("span",{className:"input-group-append"},c.a.createElement("button",{type:"submit",className:"btn btn-info",onClick:function(e){e.preventDefault(),a(r)}},"Play")))))))))}),b=(a(37),Object(n.createContext)()),d=a(11),p=a.n(d),y=a(15),f=a(27),h=a(16),v=a.n(h),E=(a(39),a(41),{apiKey:"AIzaSyAO7Opd3kKUYrHS32RfwXVJTcsv7BAzoxg",authDomain:"typinggamev2.firebaseapp.com",databaseURL:"https://typinggamev2.firebaseio.com/",storageBucket:"typinggamev2"}),g=new function e(){Object(f.a)(this,e),v.a.initializeApp(E),this.auth=v.a.auth(),this.db=v.a.database()},O=function(e){var t=e.text;return c.a.createElement("div",{className:"main d-flex justify-content-center "},c.a.createElement("div",{className:"spinner-border text-danger align-self-center",style:{height:"10vw",width:"10vw"},role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")),c.a.createElement("span",{className:"align-self-center",style:{position:"absolute",color:"white"}},t))},j=Object(s.f)((function(e){var t=Object(n.useContext)(u).username,a=Object(n.useContext)(b),l=a.showCreateLobby,o=(a.showJoinLobby,a.showMainMenu,a.showSearchLobby,Object(n.useState)(!1)),r=Object(i.a)(o,2),s=r[0],m=r[1],d=function(){var a=Object(y.a)(p.a.mark((function a(){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return m(!0),a.next=3,g.db.ref("queue").push({user:t});case 3:a.sent.ref.on("value",(function(t){var a=t.val();null!=a&&void 0!=a.lobbyId&&g.db.ref("lobbies").child(a.lobbyId).on("value",(function(t){var n=t.val();console.log(n),void 0!==n.quote&&e.history.push("/game/".concat(a.lobbyId))}))}));case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return s?c.a.createElement(O,{text:"searching for players..."}):c.a.createElement("div",{className:"container  d-flex justify-content-center "},c.a.createElement("div",{className:"button-container align-self-center"},c.a.createElement("div",{className:"row  "},c.a.createElement("div",{className:"col-12"},c.a.createElement("button",{type:"button",className:"btn btn-outline-light"},"Join Lobby"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("button",{type:"button",className:"btn btn-outline-light",onClick:d},"Search for a lobby"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("button",{type:"button",className:"btn btn-outline-light",onClick:function(){l(!0)}},"Create lobby")))))})),N=a(10),w=Object(s.f)((function(e){var t,a=Object(n.useState)("publica"),l=Object(i.a)(a,2),o=l[0],r=l[1],s=Object(n.useState)(""),u=Object(i.a)(s,2),m=u[0],b=u[1],d=Object(n.useState)(""),p=Object(i.a)(d,2),y=p[0],f=p[1],h=Object(n.useState)(!1),v=Object(i.a)(h,2),E=v[0],j=v[1],w=function(){""===m||""===y&&"privada"===o||(console.log("empiza la creacion"),j(!0),g.db.ref("lobbies").push({nombre:m,tipo:o,password:y}).then((function(t){console.log(t.key),t.ref.on("value",(function(a){void 0!=a.val().quote&&e.history.push("/game/".concat(t.key))}))})).catch((function(e){console.log(e)})))};return E?c.a.createElement(O,null):c.a.createElement("div",{className:"container  d-flex justify-content-center "},c.a.createElement("div",{className:"button-container align-self-center"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("div",{className:"input-group input-group-sm mb-3"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-sm"},"Lobby name")),c.a.createElement("input",(t={className:"text"},Object(N.a)(t,"className","form-control"),Object(N.a)(t,"aria-label","Small"),Object(N.a)(t,"aria-describedby","inputGroup-sizing-sm"),Object(N.a)(t,"onChange",(function(e){b(e.target.value)})),t))))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-6"},c.a.createElement("div",{className:"btn-group btn-group-toggle",style:{width:"inherit"},"data-toggle":"buttons"},c.a.createElement("label",{className:"btn btn-secondary active",id:"publica"},c.a.createElement("input",{type:"radio",name:"options",id:"option1",autoComplete:"off",checked:"publica"===o,onChange:function(){r("publica"),document.getElementById("publica").classList.add("active"),document.getElementById("privada").classList.remove("active")}}),"Publica"),c.a.createElement("label",{className:"btn btn-secondary",id:"privada"},c.a.createElement("input",{checked:"privada"===o,type:"radio",className:"options",id:"option2",autoComplete:"off",onChange:function(){console.log("test"),r("privada"),document.getElementById("publica").classList.remove("active"),document.getElementById("privada").classList.add("active")}}),"Privada"))),"privada"===o?c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"col-6"},c.a.createElement("input",{type:"password",className:"form-control",id:"inputPassword4",placeholder:"Password",onChange:function(e){f(e.target.value)},value:y})),c.a.createElement("div",{className:"col-12",style:{marginTop:"15px"}},c.a.createElement("button",{className:"btn btn-info",onClick:w},"PLAY!"))):c.a.createElement("div",{className:"col-6"},c.a.createElement("button",{className:"btn btn-info",onClick:w},"PLAY!")))))})),S=function(){var e=Object(n.useContext)(u).username,t=Object(n.useContext)(b),a=t.mainMenu,l=t.createLobby,o=(t.searchLobby,t.joinLobby,null);return!0===l?o=c.a.createElement(w,null):!0===a&&(o=c.a.createElement(j,null)),c.a.createElement("div",{className:"main d-flex justify-content-center"},c.a.createElement("div",{className:"headerMenu"},"TYPING GAME"),c.a.createElement("div",{className:"align-self-center menu rounded"},c.a.createElement("div",{className:"menu-top-corner rounded justify-content-center",style:{color:"white"}},"Are you ready to type ",e," ?"),o))},x=(a(48),function(e){var t=Object(n.useContext)(u).username,a=e.match.params[0],l=Object(n.useState)(!0),o=Object(i.a)(l,2),r=o[0],s=o[1],m=Object(n.useState)(null),b=Object(i.a)(m,2),d=b[0],f=b[1],h=Object(n.useState)(null),v=Object(i.a)(h,2),E=v[0],j=v[1],N=Object(n.useState)(null),w=Object(i.a)(N,2),S=w[0],x=w[1],L=Object(n.useState)(""),A=Object(i.a)(L,2),C=A[0],T=A[1],P=Object(n.useState)(""),k=Object(i.a)(P,2),M=k[0],B=k[1],_=Object(n.useState)(null),I=Object(i.a)(_,2),H=I[0],q=I[1],Y=Object(n.useState)(""),D=Object(i.a)(Y,2),R=D[0],W=D[1],U=Object(n.useState)(null),G=Object(i.a)(U,2),J=G[0],z=G[1],F=Object(n.useState)(""),K=Object(i.a)(F,2),V=K[0],X=K[1],$=Object(n.useState)(""),Q=Object(i.a)($,2),Z=Q[0],ee=Q[1],te=Object(n.useState)(""),ae=Object(i.a)(te,2),ne=ae[0],ce=ae[1],le=Object(n.useState)(""),oe=Object(i.a)(le,2),re=oe[0],se=oe[1],ie=Object(n.useState)(""),ue=Object(i.a)(ie,2),me=ue[0],be=ue[1],de=Object(n.useState)(null),pe=Object(i.a)(de,2),ye=pe[0],fe=pe[1],he=Object(n.useState)(!1),ve=Object(i.a)(he,2),Ee=(ve[0],ve[1]);Object(n.useEffect)((function(){if(null!==t)g.db.ref("lobbies").child(a).once("value",(function(e){var n=e.val();Ee(!0),void 0!==n.quote&&(void 0==n.player1?e.ref.update({player1:t}).then((function(){g.db.ref("countdown").child(a).update({player1:t}).then((function(){x(1)})),g.db.ref("countdown").child(a).onDisconnect().update({player1:null}),e.ref.onDisconnect().update({player1:null})})):void 0===n.player2&&e.ref.update({player2:t}).then((function(){g.db.ref("countdown").child(a).update({player2:t}).then((function(){x(2)})),g.db.ref("countdown").child(a).onDisconnect().update({player2:null}),e.ref.onDisconnect().update({player2:null})})),e.ref.on("value",(function(e){var t=e.val();f(void 0!=t.player1?t.player1:"waiting for player"),j(void 0!=t.player2?t.player2:"waiting for player"),null==H&&q(t.quote),void 0!==t.textPlayer1&&X(t.textPlayer1),void 0!==t.textPlayer2&&ee(t.textPlayer2),null!==J&&J==t.quote||z(t.quote),t.quote})),1==S?e.ref.onDisconnect().update({textPlayer1:""}).then((function(){null!=J&&q(J.replace(M)),T(""),X(null)})):e.ref.onDisconnect().update({textPlayer2:""}).then((function(){null!=J&&q(J.replace(C)),B(""),ee(null)})))}))}),[t]),Object(n.useEffect)((function(){g.db.ref("countdown").child(a).on("value",(function(e){var t=e.val();null!=t&&(0===t.countDown?(s(!1),document.querySelector("h1").innerHTML="READY",document.querySelector(".banner").classList.add("show")):1===t.countDown?document.querySelector("h1").innerHTML="SET":2===t.countDown?(document.querySelector("h1").innerHTML="TYPE!",document.querySelector(".banner").classList.remove("show"),be("playing"),document.getElementById("textareainput").click()):3===t.countDown&&(be("playing"),s(!1),document.getElementById("textareainput").click()))}))}),[]),Object(n.useEffect)((function(){if(null!=V&&null!=Z&&null!=J){var e=ge(V),t=ge(Z);if(e.length>t.length){var a=J.replace(e,""),n=e.replace(t,""),c=t,l=t;q(a),T(n),B(c),W(l),ce(e),se(t),console.log("PLAYER 1"),console.log("textP1: ",n),console.log("textP2: ",c),console.log("both: ",l),console.log("missing quote: ",a)}else{a=J.replace(t,""),n=e,c=t.replace(e,""),l=e;q(a),T(n),B(c),W(l),ce(e),se(t),console.log("PLAYER 2"),console.log("textP1: ",n),console.log("textP2: ",c),console.log("both: ",l),console.log("missing quote: ",a)}}else if(null!=J)if(null!=V){console.log("firesttttttttt");e=ge(V);T(e)}else{t=ge(Z);B(t)}}),[V,Z]),Object(n.useEffect)((function(){null!=J&&null==ye&&(ne===J&&(fe(d),g.db.ref("lobbies").child(a).update({winner:d})),re===J&&(fe(E),g.db.ref("lobbies").child(a).update({winner:E})))}),[ne,re]);var ge=function(e){if(null!=J){for(var t="",a=0;a<J.length&&e.charAt(a)===J.charAt(a);a++)t+=e.charAt(a);return t}return""};return r?c.a.createElement(O,{text:"setting up the lobby"}):null!==ye?c.a.createElement("div",{className:"main d-flex justify-content-center ",style:{height:"200px",width:"150px",backgroundColor:"red"}}):c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"banner showMe"},c.a.createElement("h1",null)),c.a.createElement("div",{className:"container container-playground"},c.a.createElement("div",{className:"paragraph",onCopy:function(e){e.preventDefault(),console.log("cheater")}},c.a.createElement(n.Fragment,null,c.a.createElement("span",{id:"both"},R),c.a.createElement("span",{id:ne.length>=re.length?"player1":"player2"},ne.length>re.length?(console.log(C),C):re.length>ne.length?(console.log(M),M):null),c.a.createElement("span",{id:"general"},H))),c.a.createElement("div",{className:"match-label"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-5",style:{position:"inherit"}},d),c.a.createElement("div",{className:"col-md-2",style:{position:"inherit"}},c.a.createElement("b",null,"VS")),c.a.createElement("div",{className:"col-md-5",style:{position:"inherit"}},E))),c.a.createElement("div",{className:"textarea"},c.a.createElement("textarea",{id:"textareainput",rows:12,placeholder:"Write here",className:"textarea-input",disabled:"playing"!==me,onChange:function(){var e=Object(y.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1==S?g.db.ref("lobbies").child(a).update({textPlayer1:t.target.value}):2==S&&g.db.ref("lobbies").child(a).update({textPlayer2:t.target.value});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))))}),L=a(8),A=function(e,t){switch(t.type){case"SHOW_CREATE_LOBBY":return Object(L.a)({},e,{createLobby:t.payload,mainMenu:!t.payload,joinLobby:!t.payload,searchLobby:!t.payload});case"SHOW_SEARCH_LOBBY":return Object(L.a)({},e,{createLobby:!t.payload,mainMenu:!t.payload,joinLobby:!t.payload,searchLobby:t.payload});case"SHOW_JOIN_LOBBY":return Object(L.a)({},e,{createLobby:!t.payload,mainMenu:!t.payload,joinLobby:t.payload,searchLobby:!t.payload});case"SHOW_MAIN_MENU":return Object(L.a)({},e,{createLobby:!t.payload,mainMenu:t.payload,joinLobby:!t.payload,searchLobby:!t.payload});default:return e}},C=function(e){var t=Object(n.useReducer)(A,{mainMenu:!0,createLobby:!1,searchLobby:!1,joinLobby:!1}),a=Object(i.a)(t,2),l=a[0],o=a[1];return c.a.createElement(b.Provider,{value:{mainMenu:l.mainMenu,createLobby:l.createLobby,searchLobby:l.searchLobby,joinLobby:l.joinLobby,showCreateLobby:function(e){o({type:"SHOW_CREATE_LOBBY",payload:e})},showJoinLobby:function(e){o({type:"SHOW_JOIN_LOBBY",payload:e})},showMainMenu:function(e){o({type:"SHOW_MAIN_MENU",payload:e})},showSearchLobby:function(e){o({type:"SHOW_SEARCH_LOBBY",payload:e})}}},e.children)};var T=function(){var e=Object(n.useContext)(u),t=e.username,a=(e.getAuthState,null);return a=!1===e.checked?O:null!==t?S:m,c.a.createElement(C,null,c.a.createElement(r.a,null,c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/",component:a}),c.a.createElement(s.a,{exact:!0,path:"/game/*",component:x}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=function(e,t){switch(t.type){case"SET_AUTHSTATE":return localStorage.setItem("auth",t.payload),Object(L.a)({},e,{username:t.payload});case"GET_AUTHSTATE":return Object(L.a)({},e,{username:t.payload,checked:!0});default:return e}},k=function(e){var t=Object(n.useReducer)(P,{username:null,checked:!1}),a=Object(i.a)(t,2),l=a[0],o=a[1];Object(n.useEffect)((function(){r(),console.log("se llama getAuhState")}),[]);var r=function(){var e=localStorage.getItem("auth");o({type:"GET_AUTHSTATE",payload:e})};return c.a.createElement(u.Provider,{value:{username:l.username,getAuthState:r,setAuthState:function(e){o({type:"SET_AUTHSTATE",payload:e})},checked:l.checked}},e.children)};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null,c.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.d989c8a3.chunk.js.map